<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Pon los eventos en orden</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800;900&family=Fredoka:wght@400;500;600;700&display=swap');

  :root {
    --amor-primary: #9B59B6;
    --amor-light: #F3E5F5;
    --amor-accent: #E1BEE7;
    --amor-dark: #6A1B9A;
    --choc-primary: #8D6E63;
    --choc-light: #EFEBE9;
    --choc-accent: #D7CCC8;
    --choc-dark: #4E342E;
    --success: #4CAF50;
    --error: #E53935;
    --star: #FFD54F;
    --bg: #FAFAF5;
    --radius: 16px;
  }

  * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }

  body {
    font-family: 'Nunito', sans-serif;
    background: var(--bg);
    min-height: 100vh;
    overflow-x: hidden;
  }

  /* ‚îÄ‚îÄ‚îÄ Story Select Screen ‚îÄ‚îÄ‚îÄ */
  .screen { display: none; }
  .screen.active { display: flex; flex-direction: column; align-items: center; }

  #story-select {
    justify-content: center;
    min-height: 100vh;
    padding: 24px;
    gap: 32px;
    background: linear-gradient(160deg, #f8f0ff 0%, #fff8f0 50%, #f0fff4 100%);
  }

  #story-select h1 {
    font-family: 'Fredoka', sans-serif;
    font-size: clamp(28px, 5vw, 42px);
    color: #333;
    text-align: center;
    line-height: 1.2;
  }

  .story-cards {
    display: flex;
    gap: 24px;
    flex-wrap: wrap;
    justify-content: center;
    max-width: 800px;
  }

  .story-card {
    width: 320px;
    border-radius: var(--radius);
    padding: 32px 24px;
    cursor: pointer;
    transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
    text-align: center;
    border: 3px solid transparent;
    position: relative;
    overflow: hidden;
  }

  .story-card::before {
    content: '';
    position: absolute;
    top: -50%;
    left: -50%;
    width: 200%;
    height: 200%;
    background: radial-gradient(circle, rgba(255,255,255,0.3) 0%, transparent 60%);
    opacity: 0;
    transition: opacity 0.3s;
  }

  .story-card:hover::before { opacity: 1; }
  .story-card:hover { transform: translateY(-6px) scale(1.02); box-shadow: 0 12px 40px rgba(0,0,0,0.15); }
  .story-card:active { transform: translateY(-2px) scale(0.98); }

  .card-amor {
    background: linear-gradient(135deg, #CE93D8 0%, #AB47BC 100%);
    color: white;
    box-shadow: 0 6px 24px rgba(156, 39, 176, 0.3);
  }

  .card-choc {
    background: linear-gradient(135deg, #A1887F 0%, #6D4C41 100%);
    color: white;
    box-shadow: 0 6px 24px rgba(109, 76, 65, 0.3);
  }

  .story-card .emoji { font-size: 56px; margin-bottom: 12px; display: block; }
  .story-card h2 { font-family: 'Fredoka', sans-serif; font-size: 22px; margin-bottom: 8px; }
  .story-card p { font-size: 14px; opacity: 0.9; line-height: 1.4; }

  /* ‚îÄ‚îÄ‚îÄ Game Screen ‚îÄ‚îÄ‚îÄ */
  #game-screen {
    min-height: 100vh;
    padding: 16px;
    width: 100%;
  }

  .game-header {
    text-align: center;
    padding: 16px;
    border-radius: var(--radius);
    margin-bottom: 16px;
    width: 100%;
    max-width: 700px;
    position: relative;
  }

  .game-header.amor { background: var(--amor-light); border: 2px solid var(--amor-accent); }
  .game-header.choc { background: var(--choc-light); border: 2px solid var(--choc-accent); }

  .game-header h2 {
    font-family: 'Fredoka', sans-serif;
    font-size: clamp(20px, 4vw, 28px);
  }
  .game-header.amor h2 { color: var(--amor-dark); }
  .game-header.choc h2 { color: var(--choc-dark); }

  .game-header p {
    font-size: 15px;
    color: #666;
    margin-top: 4px;
  }

  .back-btn {
    position: absolute;
    left: 12px;
    top: 50%;
    transform: translateY(-50%);
    background: white;
    border: 2px solid #ddd;
    border-radius: 50%;
    width: 40px;
    height: 40px;
    cursor: pointer;
    font-size: 20px;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s;
  }
  .back-btn:hover { background: #f5f5f5; transform: translateY(-50%) scale(1.1); }

  .instructions {
    background: white;
    border-radius: var(--radius);
    padding: 12px 20px;
    margin-bottom: 16px;
    max-width: 700px;
    width: 100%;
    text-align: center;
    font-size: 16px;
    font-weight: 600;
    color: #555;
    border: 2px dashed #ddd;
  }

  /* ‚îÄ‚îÄ‚îÄ Drop Zones ‚îÄ‚îÄ‚îÄ */
  .drop-zones {
    display: flex;
    gap: 12px;
    max-width: 700px;
    width: 100%;
    margin-bottom: 20px;
    flex-wrap: nowrap;
  }

  .drop-zone {
    flex: 1;
    min-height: 120px;
    border-radius: var(--radius);
    border: 3px dashed #ccc;
    background: white;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: flex-start;
    padding: 8px;
    transition: all 0.3s;
    position: relative;
  }

  .drop-zone.amor-zone { border-color: var(--amor-accent); }
  .drop-zone.choc-zone { border-color: var(--choc-accent); }

  .drop-zone .zone-label {
    font-family: 'Fredoka', sans-serif;
    font-weight: 700;
    font-size: clamp(11px, 2.5vw, 15px);
    padding: 4px 10px;
    border-radius: 20px;
    margin-bottom: 6px;
    white-space: nowrap;
  }

  .amor-zone .zone-label { background: var(--amor-primary); color: white; }
  .choc-zone .zone-label { background: var(--choc-primary); color: white; }

  .drop-zone .zone-number {
    font-size: clamp(28px, 6vw, 48px);
    color: #e0e0e0;
    font-weight: 900;
    line-height: 1;
  }

  .drop-zone.drag-over {
    border-style: solid;
    transform: scale(1.03);
  }
  .drop-zone.drag-over.amor-zone { background: var(--amor-light); border-color: var(--amor-primary); }
  .drop-zone.drag-over.choc-zone { background: var(--choc-light); border-color: var(--choc-primary); }

  .drop-zone.filled { border-style: solid; border-color: #bbb; }

  /* ‚îÄ‚îÄ‚îÄ Event Cards ‚îÄ‚îÄ‚îÄ */
  .event-cards {
    display: flex;
    flex-direction: column;
    gap: 10px;
    max-width: 700px;
    width: 100%;
    margin-bottom: 20px;
  }

  .event-card {
    background: white;
    border-radius: 12px;
    padding: 14px 18px;
    cursor: grab;
    transition: all 0.25s cubic-bezier(0.34, 1.56, 0.64, 1);
    border: 2px solid #e0e0e0;
    display: flex;
    align-items: center;
    gap: 14px;
    user-select: none;
    -webkit-user-select: none;
    touch-action: none;
    box-shadow: 0 2px 8px rgba(0,0,0,0.06);
  }

  .event-card:hover { transform: translateY(-2px); box-shadow: 0 6px 20px rgba(0,0,0,0.12); }
  .event-card:active, .event-card.dragging { cursor: grabbing; opacity: 0.85; transform: scale(0.97); }

  .event-card.amor-card { border-color: var(--amor-accent); }
  .event-card.choc-card { border-color: var(--choc-accent); }

  .event-card .card-emoji { font-size: 32px; flex-shrink: 0; }
  .event-card .card-text { font-size: clamp(13px, 2.8vw, 16px); color: #333; line-height: 1.4; font-weight: 600; }

  .event-card.placed {
    opacity: 0.4;
    pointer-events: none;
    transform: scale(0.95);
  }

  .event-card.in-zone {
    cursor: grab;
    font-size: 12px;
    padding: 8px 10px;
    margin: 0;
    border-radius: 8px;
    width: 100%;
  }
  .event-card.in-zone .card-emoji { font-size: 20px; }
  .event-card.in-zone .card-text { font-size: clamp(9px, 2vw, 12px); }

  .event-card.correct {
    border-color: var(--success) !important;
    background: #E8F5E9;
    animation: correctPulse 0.5s ease;
  }

  .event-card.wrong {
    border-color: var(--error) !important;
    background: #FFEBEE;
    animation: shake 0.5s ease;
  }

  @keyframes correctPulse {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(1.04); }
  }

  @keyframes shake {
    0%, 100% { transform: translateX(0); }
    20% { transform: translateX(-8px); }
    40% { transform: translateX(8px); }
    60% { transform: translateX(-4px); }
    80% { transform: translateX(4px); }
  }

  /* ‚îÄ‚îÄ‚îÄ Check Button ‚îÄ‚îÄ‚îÄ */
  .check-btn {
    font-family: 'Fredoka', sans-serif;
    font-size: 20px;
    font-weight: 700;
    padding: 14px 48px;
    border: none;
    border-radius: 50px;
    color: white;
    cursor: pointer;
    transition: all 0.3s;
    margin-bottom: 20px;
    box-shadow: 0 4px 16px rgba(0,0,0,0.2);
  }

  .check-btn:hover { transform: translateY(-2px); box-shadow: 0 6px 24px rgba(0,0,0,0.25); }
  .check-btn:active { transform: translateY(0); }
  .check-btn:disabled { opacity: 0.5; cursor: not-allowed; transform: none; }

  .check-btn.amor-btn { background: linear-gradient(135deg, var(--amor-primary), var(--amor-dark)); }
  .check-btn.choc-btn { background: linear-gradient(135deg, var(--choc-primary), var(--choc-dark)); }

  /* ‚îÄ‚îÄ‚îÄ Celebration ‚îÄ‚îÄ‚îÄ */
  #celebration {
    position: fixed;
    top: 0; left: 0; right: 0; bottom: 0;
    background: rgba(0,0,0,0.6);
    display: none;
    align-items: center;
    justify-content: center;
    z-index: 1000;
    backdrop-filter: blur(4px);
  }

  #celebration.show { display: flex; }

  .celebration-box {
    background: white;
    border-radius: 24px;
    padding: 40px;
    text-align: center;
    max-width: 400px;
    width: 90%;
    animation: popIn 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
  }

  @keyframes popIn {
    0% { transform: scale(0.5); opacity: 0; }
    100% { transform: scale(1); opacity: 1; }
  }

  .celebration-box .stars { font-size: 48px; margin-bottom: 12px; }
  .celebration-box h2 { font-family: 'Fredoka', sans-serif; font-size: 28px; color: #333; margin-bottom: 8px; }
  .celebration-box p { font-size: 16px; color: #666; margin-bottom: 20px; }

  .cel-btn {
    font-family: 'Fredoka', sans-serif;
    font-size: 16px;
    font-weight: 600;
    padding: 12px 32px;
    border: none;
    border-radius: 50px;
    color: white;
    cursor: pointer;
    margin: 4px;
    transition: all 0.2s;
  }
  .cel-btn:hover { transform: translateY(-2px); }
  .cel-btn.primary { background: var(--success); }
  .cel-btn.secondary { background: #78909C; }

  /* ‚îÄ‚îÄ‚îÄ Confetti ‚îÄ‚îÄ‚îÄ */
  .confetti {
    position: fixed;
    top: -10px;
    width: 10px;
    height: 10px;
    border-radius: 2px;
    z-index: 1001;
    animation: fall linear forwards;
  }

  @keyframes fall {
    0% { transform: translateY(0) rotate(0deg); opacity: 1; }
    100% { transform: translateY(100vh) rotate(720deg); opacity: 0; }
  }

  /* ‚îÄ‚îÄ‚îÄ Feedback toast ‚îÄ‚îÄ‚îÄ */
  .toast {
    position: fixed;
    bottom: 24px;
    left: 50%;
    transform: translateX(-50%) translateY(80px);
    padding: 12px 28px;
    border-radius: 50px;
    font-family: 'Fredoka', sans-serif;
    font-size: 16px;
    font-weight: 600;
    color: white;
    z-index: 999;
    transition: transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
    box-shadow: 0 4px 20px rgba(0,0,0,0.3);
  }
  .toast.show { transform: translateX(-50%) translateY(0); }
  .toast.success { background: var(--success); }
  .toast.error { background: var(--error); }

  @media (max-width: 600px) {
    .drop-zones { gap: 6px; }
    .drop-zone { min-height: 90px; padding: 6px; }
    .event-card { padding: 10px 12px; gap: 10px; }
    .story-card { width: 280px; padding: 24px 16px; }
  }
</style>
</head>
<body>

<!-- Story Select -->
<div id="story-select" class="screen active">
  <h1>üìñ Pon los eventos en orden</h1>
  <div class="story-cards">
    <div class="story-card card-amor" onclick="startGame('amor')">
      <span class="emoji">üíáüèæ‚Äç‚ôÄÔ∏è</span>
      <h2>Amor de Pelo</h2>
      <p>La historia de Zuri y su pap√°</p>
    </div>
    <div class="story-card card-choc" onclick="startGame('choc')">
      <span class="emoji">üç´</span>
      <h2>El chocolate de abuela</h2>
      <p>La historia de Sabrina y su abuela</p>
    </div>
  </div>
</div>

<!-- Game Screen -->
<div id="game-screen" class="screen">
  <div class="game-header" id="game-header">
    <button class="back-btn" onclick="goHome()">‚Üê</button>
    <h2 id="game-title"></h2>
    <p>Arrastra los eventos a las cajas en el orden correcto</p>
  </div>

  <div class="instructions" id="instructions">
    üëÜ Toca un evento y luego toca la caja donde va
  </div>

  <div class="drop-zones" id="drop-zones"></div>
  <div class="event-cards" id="event-cards"></div>

  <button class="check-btn" id="check-btn" disabled onclick="checkAnswer()">
    ¬°Verificar! ‚úì
  </button>
</div>

<!-- Celebration Modal -->
<div id="celebration">
  <div class="celebration-box">
    <div class="stars">‚≠ê‚≠ê‚≠ê</div>
    <h2>¬°Excelente trabajo!</h2>
    <p id="cel-message">¬°Pusiste todos los eventos en el orden correcto!</p>
    <div>
      <button class="cel-btn primary" onclick="tryAgain()">Intentar otra vez üîÑ</button>
      <button class="cel-btn secondary" onclick="goHome()">Otra historia üìñ</button>
    </div>
  </div>
</div>

<!-- Toast -->
<div class="toast" id="toast"></div>

<script>
const STORIES = {
  amor: {
    title: "Amor de Pelo",
    themeClass: "amor",
    events: [
      { emoji: "üëßüèæ", text: "Zuri se despierta. Su pelo se enrolla y se riza. Ella sabe que es hermoso.", id: 0 },
      { emoji: "üì±", text: "Zuri encuentra un peinado especial en el internet para un d√≠a muy especial.", id: 1 },
      { emoji: "üíá", text: "Pap√° intenta peinar a Zuri pero es muy dif√≠cil. No sale como quieren.", id: 2 },
      { emoji: "üò¢", text: "Zuri y Pap√° se frustran. ¬°El pelo no coopera!", id: 3 },
      { emoji: "‚ú®", text: "Pap√° y Zuri trabajan juntos con paciencia y hacen un peinado hermoso.", id: 4 },
      { emoji: "üéÄ", text: "Mam√° llega a casa. La familia est√° junta y muy feliz.", id: 5 },
    ]
  },
  choc: {
    title: "El chocolate de abuela",
    themeClass: "choc",
    events: [
      { emoji: "üß≥", text: "Abuela llega de M√©xico con su maleta amarilla llena de tesoros.", id: 0 },
      { emoji: "ü•Å", text: "Sabrina y Abuela tocan m√∫sica con un tambor y un silbato de barro.", id: 1 },
      { emoji: "üëë", text: "Sabrina juega a ser una princesa maya. Abuela le pone un huipil y le trenza el pelo con cintas de colores.", id: 2 },
      { emoji: "üå±", text: "Abuela le ense√±a a Sabrina sobre el √°rbol de cacao y c√≥mo los mayas usaban las semillas.", id: 3 },
      { emoji: "üç´", text: "Sabrina aprende que Moctezuma com√≠a chocolate con nieve de las monta√±as.", id: 4 },
      { emoji: "‚òï", text: "Sabrina y su familia hacen chocolate caliente con el molinillo y lo toman juntos.", id: 5 },
    ]
  }
};

let currentStory = null;
let selectedCard = null;
let placements = {};  // zoneIndex -> eventId
let isMobile = 'ontouchstart' in window;

function shuffle(arr) {
  const a = [...arr];
  for (let i = a.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [a[i], a[j]] = [a[j], a[i]];
  }
  return a;
}

function startGame(storyKey) {
  currentStory = storyKey;
  const story = STORIES[storyKey];
  placements = {};
  selectedCard = null;

  document.getElementById('story-select').classList.remove('active');
  document.getElementById('game-screen').classList.add('active');

  const header = document.getElementById('game-header');
  header.className = `game-header ${story.themeClass}`;
  document.getElementById('game-title').textContent = story.title;

  const checkBtn = document.getElementById('check-btn');
  checkBtn.className = `check-btn ${story.themeClass}-btn`;
  checkBtn.disabled = true;
  checkBtn.textContent = '¬°Verificar! ‚úì';

  // Build drop zones
  const labels = ["Primero", "Despu√©s", "Luego", "Entonces", "M√°s tarde", "Al final"];
  const zonesContainer = document.getElementById('drop-zones');
  zonesContainer.innerHTML = '';
  for (let i = 0; i < story.events.length; i++) {
    const zone = document.createElement('div');
    zone.className = `drop-zone ${story.themeClass}-zone`;
    zone.dataset.index = i;
    zone.innerHTML = `
      <span class="zone-label">${labels[i]}</span>
      <span class="zone-number">${i + 1}</span>
    `;
    zone.addEventListener('click', () => onZoneClick(i));
    zone.addEventListener('dragover', e => { e.preventDefault(); zone.classList.add('drag-over'); });
    zone.addEventListener('dragleave', () => zone.classList.remove('drag-over'));
    zone.addEventListener('drop', e => {
      e.preventDefault();
      zone.classList.remove('drag-over');
      const eventId = parseInt(e.dataTransfer.getData('text/plain'));
      placeCard(eventId, i);
    });
    zonesContainer.appendChild(zone);
  }

  // Build shuffled event cards
  const cardsContainer = document.getElementById('event-cards');
  cardsContainer.innerHTML = '';
  const shuffled = shuffle(story.events);
  shuffled.forEach(ev => {
    const card = document.createElement('div');
    card.className = `event-card ${story.themeClass}-card`;
    card.dataset.eventId = ev.id;
    card.draggable = true;
    card.innerHTML = `
      <span class="card-emoji">${ev.emoji}</span>
      <span class="card-text">${ev.text}</span>
    `;
    card.addEventListener('click', () => onCardClick(ev.id));
    card.addEventListener('dragstart', e => {
      e.dataTransfer.setData('text/plain', ev.id);
      card.classList.add('dragging');
    });
    card.addEventListener('dragend', () => card.classList.remove('dragging'));
    cardsContainer.appendChild(card);
  });
}

function onCardClick(eventId) {
  // Remove previous selection
  document.querySelectorAll('.event-card').forEach(c => c.style.outline = '');

  const card = document.querySelector(`.event-card[data-event-id="${eventId}"]`);
  if (card.classList.contains('placed')) return;

  selectedCard = eventId;
  card.style.outline = `3px solid ${currentStory === 'amor' ? 'var(--amor-primary)' : 'var(--choc-primary)'}`;
}

function onZoneClick(zoneIndex) {
  if (selectedCard === null) return;

  // If zone already has a card, remove it first
  if (placements[zoneIndex] !== undefined) {
    removeFromZone(zoneIndex);
  }

  placeCard(selectedCard, zoneIndex);
  selectedCard = null;
  document.querySelectorAll('.event-card').forEach(c => c.style.outline = '');
}

function placeCard(eventId, zoneIndex) {
  // Remove from any previous zone
  for (const [z, eid] of Object.entries(placements)) {
    if (eid === eventId) {
      removeFromZone(parseInt(z));
    }
  }

  placements[zoneIndex] = eventId;

  // Update source card
  const sourceCard = document.querySelector(`#event-cards .event-card[data-event-id="${eventId}"]`);
  if (sourceCard) sourceCard.classList.add('placed');

  // Put mini card in zone
  const story = STORIES[currentStory];
  const ev = story.events.find(e => e.id === eventId);
  const zone = document.querySelector(`.drop-zone[data-index="${zoneIndex}"]`);

  // Remove number placeholder
  const numEl = zone.querySelector('.zone-number');
  if (numEl) numEl.style.display = 'none';

  // Remove any existing placed card
  const existing = zone.querySelector('.event-card');
  if (existing) existing.remove();

  const miniCard = document.createElement('div');
  miniCard.className = `event-card ${story.themeClass}-card in-zone`;
  miniCard.dataset.eventId = eventId;
  miniCard.innerHTML = `
    <span class="card-emoji">${ev.emoji}</span>
    <span class="card-text">${ev.text}</span>
  `;
  miniCard.addEventListener('click', (e) => {
    e.stopPropagation();
    removeFromZone(zoneIndex);
  });
  zone.appendChild(miniCard);
  zone.classList.add('filled');

  updateCheckButton();
}

function removeFromZone(zoneIndex) {
  const eventId = placements[zoneIndex];
  if (eventId === undefined) return;

  delete placements[zoneIndex];

  const zone = document.querySelector(`.drop-zone[data-index="${zoneIndex}"]`);
  const miniCard = zone.querySelector('.event-card');
  if (miniCard) miniCard.remove();

  const numEl = zone.querySelector('.zone-number');
  if (numEl) numEl.style.display = '';
  zone.classList.remove('filled');

  // Restore source card
  const sourceCard = document.querySelector(`#event-cards .event-card[data-event-id="${eventId}"]`);
  if (sourceCard) sourceCard.classList.remove('placed');

  updateCheckButton();
}

function updateCheckButton() {
  const story = STORIES[currentStory];
  const allPlaced = Object.keys(placements).length === story.events.length;
  document.getElementById('check-btn').disabled = !allPlaced;
}

function checkAnswer() {
  const story = STORIES[currentStory];
  let allCorrect = true;

  for (let i = 0; i < story.events.length; i++) {
    const zone = document.querySelector(`.drop-zone[data-index="${i}"]`);
    const miniCard = zone.querySelector('.event-card');
    if (!miniCard) continue;

    const placedId = placements[i];
    if (placedId === i) {
      miniCard.classList.remove('wrong');
      miniCard.classList.add('correct');
    } else {
      miniCard.classList.remove('correct');
      miniCard.classList.add('wrong');
      allCorrect = false;
    }
  }

  if (allCorrect) {
    setTimeout(() => {
      showCelebration();
      launchConfetti();
    }, 600);
  } else {
    showToast("¬°Casi! Intenta mover los eventos rojos. ü§î", "error");

    // After a moment, remove wrong styling so they can try again
    setTimeout(() => {
      document.querySelectorAll('.event-card.wrong').forEach(c => c.classList.remove('wrong'));
    }, 2000);
  }
}

function showToast(msg, type) {
  const toast = document.getElementById('toast');
  toast.textContent = msg;
  toast.className = `toast ${type} show`;
  setTimeout(() => toast.classList.remove('show'), 3000);
}

function showCelebration() {
  document.getElementById('celebration').classList.add('show');
}

function launchConfetti() {
  const colors = ['#FF6B6B', '#FFD93D', '#6BCB77', '#4D96FF', '#9B59B6', '#FF8C42', '#00D2FF'];
  for (let i = 0; i < 60; i++) {
    const confetti = document.createElement('div');
    confetti.className = 'confetti';
    confetti.style.left = Math.random() * 100 + 'vw';
    confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
    confetti.style.width = (Math.random() * 8 + 6) + 'px';
    confetti.style.height = (Math.random() * 8 + 6) + 'px';
    confetti.style.animationDuration = (Math.random() * 2 + 1.5) + 's';
    confetti.style.animationDelay = (Math.random() * 0.8) + 's';
    document.body.appendChild(confetti);
    setTimeout(() => confetti.remove(), 4000);
  }
}

function tryAgain() {
  document.getElementById('celebration').classList.remove('show');
  startGame(currentStory);
}

function goHome() {
  document.getElementById('celebration').classList.remove('show');
  document.getElementById('game-screen').classList.remove('active');
  document.getElementById('story-select').classList.add('active');
}
</script>
</body>
</html>
